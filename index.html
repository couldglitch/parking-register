<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADHI PARASAKTHI CYCLE STAND Registration</title>
    <!-- Font Awesome CDN for WhatsApp and parking icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <!-- Noto Sans Tamil for Tamil text -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Tamil&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans Tamil', 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background: #f4f4f4;
            overflow: auto;
        }
        .form-box {
            background: #ffffff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            max-width: 350px;
            width: 90%;
            border: 1px solid #e0e0e0;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .form-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
        }
        .logo {
            display: block;
            text-align: center;
            margin-bottom: 15px;
        }
        .logo i {
            font-size: 40px;
            color: #25D366;
        }
        .form-box h2 {
            text-align: center;
            margin-bottom: 25px;
            color: #000000;
            font-size: 24px;
            font-weight: 600;
            letter-spacing: 1px;
        }
        .form-box label {
            display: block;
            margin: 15px 0 5px;
            color: #000000;
            font-size: 14px;
            font-weight: 500;
        }
        .form-box input {
            width: 100%;
            padding: 12px;
            border: 1px solid #000000;
            border-radius: 8px;
            background: #ffffff;
            color: #000000;
            font-size: 16px;
            box-sizing: border-box;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }
        .form-box input::placeholder {
            color: #666666;
        }
        .form-box input:focus {
            outline: none;
            border-color: #333333;
            box-shadow: 0 0 8px rgba(0, 0, 0, 0.2);
        }
        .form-box button {
            width: 100%;
            padding: 12px;
            background: #25D366;
            color: #ffffff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 20px;
            font-size: 16px;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: background 0.3s ease, transform 0.2s ease;
        }
        .form-box button:hover {
            background: #1ebe57;
            transform: scale(1.02);
        }
        .form-box button:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
        }
        .error {
            color: #e63946;
            font-size: 12px;
            margin-top: 5px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .error.show {
            opacity: 1;
        }
        .language-toggle {
            text-align: center;
            margin-top: 15px;
        }
        .language-toggle button {
            background: none;
            border: none;
            color: #000000;
            font-size: 14px;
            cursor: pointer;
            text-decoration: underline;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal-content {
            background: #ffffff;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            max-width: 300px;
            width: 80%;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }
        .modal-content h3 {
            margin-bottom: 20px;
            color: #000000;
        }
        .modal-content button {
            width: 45%;
            margin: 5px;
        }
        @media (max-width: 400px) {
            .form-box {
                padding: 20px;
            }
            .form-box h2 {
                font-size: 20px;
            }
            .form-box input, .form-box button {
                font-size: 14px;
            }
            .logo i {
                font-size: 32px;
            }
            .modal-content {
                width: 90%;
            }
        }
    </style>
</head>
<body>
    <!-- Language Selection Modal -->
    <div class="modal" id="languageModal">
        <div class="modal-content">
            <h3>Select Language / மொழியைத் தேர்ந்தெடு</h3>
            <button onclick="setLanguage('en')">English</button>
            <button onclick="setLanguage('ta')">தமிழ்</button>
        </div>
    </div>

    <div class="form-box">
        <div class="logo">
            <i class="fas fa-parking" aria-label="Parking logo"></i>
        </div>
        <h2 id="title1">ADHI PARASAKTHI CYCLE STAND</h2>
        <h2 id="title2">Registration</h2>
        <form id="parkingForm">
            <label for="name" id="nameLabel">Name:</label>
            <input type="text" id="name" name="name" placeholder="Enter your name" required aria-required="true">
            <div id="nameError" class="error" aria-live="polite">Name can only contain letters, spaces, apostrophes, or hyphens.</div>
            <label for="bikeNumber" id="bikeNumberLabel">Bike Number Plate:</label>
            <input type="text" id="bikeNumber" name="bikeNumber" placeholder="e.g., TN564778 or TN56BZ4790" required aria-required="true">
            <div id="bikeNumberError" class="error" aria-live="polite">Bike number must be in TNXXYYYY or TNXXAAYYYY format (e.g., TN564778 or TN56BZ4790).</div>
            <button type="submit" id="submitBtn"><i class="fab fa-whatsapp"></i> <span id="submitText">Send to WhatsApp</span></button>
        </form>
        <div class="language-toggle">
            <button onclick="showLanguageModal()">Change Language / மொழியை மாற்று</button>
        </div>
    </div>

    <script>
        // Language data
        const translations = {
            en: {
                title1: 'ADHI PARASAKTHI CYCLE STAND',
                title2: 'Registration',
                nameLabel: 'Name:',
                namePlaceholder: 'Enter your name',
                nameError: 'Name can only contain letters, spaces, apostrophes, or hyphens.',
                bikeNumberLabel: 'Bike Number Plate:',
                bikeNumberPlaceholder: 'e.g., TN564778 or TN56BZ4790',
                bikeNumberError: 'Bike number must be in TNXXYYYY or TNXXAAYYYY format (e.g., TN564778 or TN56BZ4790).',
                submitText: 'Send to WhatsApp',
                sendingText: 'Sending...',
                successMessage: 'Registration sent successfully!',
                errorMessage: 'Unable to open WhatsApp. Please ensure WhatsApp is installed or check your network connection.'
            },
            ta: {
                title1: 'ஆதி பராசக்தி சைக்கிள் ஸ்டாண்ட்',
                title2: 'பதிவு',
                nameLabel: 'பெயர்:',
                namePlaceholder: 'உங்கள் பெயரை உள்ளிடவும்',
                nameError: 'பெயரில் எழுத்துக்கள், இடைவெளிகள், அப்போஸ்ட்ரோப்கள் அல்லது ஹைபன்கள் மட்டுமே இருக்க வேண்டும்.',
                bikeNumberLabel: 'பைக்கின் எண் பலகை:',
                bikeNumberPlaceholder: 'எ.கா., TN564778 அல்லது TN56BZ4790',
                bikeNumberError: 'பைக்கின் எண் TNXXYYYY அல்லது TNXXAAYYYY வடிவத்தில் இருக்க வேண்டும் (எ.கா., TN564778 அல்லது TN56BZ4790).',
                submitText: 'வாட்ஸ்அப்பிற்கு அனுப்பு',
                sendingText: 'அனுப்பப்படுகிறது...',
                successMessage: 'பதிவு வெற்றிகரமாக அனுப்பப்பட்டது!',
                errorMessage: 'வாட்ஸ்அப்பை திறக்க முடியவில்லை. வாட்ஸ்அப் நிறுவப்பட்டுள்ளதா அல்லது உங்கள் நெட்வொர்க்கை சரிபார்க்கவும்.'
            }
        };

        // Get elements
        const elements = {
            title1: document.getElementById('title1'),
            title2: document.getElementById('title2'),
            nameLabel: document.getElementById('nameLabel'),
            nameInput: document.getElementById('name'),
            nameError: document.getElementById('nameError'),
            bikeNumberLabel: document.getElementById('bikeNumberLabel'),
            bikeNumberInput: document.getElementById('bikeNumber'),
            bikeNumberError: document.getElementById('bikeNumberError'),
            submitBtn: document.getElementById('submitBtn'),
            submitText: document.getElementById('submitText')
        };

        // Language functions
        function setLanguage(lang) {
            localStorage.setItem('language', lang);
            const t = translations[lang];
            elements.title1.textContent = t.title1;
            elements.title2.textContent = t.title2;
            elements.nameLabel.textContent = t.nameLabel;
            elements.nameInput.placeholder = t.namePlaceholder;
            elements.nameError.textContent = t.nameError;
            elements.bikeNumberLabel.textContent = t.bikeNumberLabel;
            elements.bikeNumberInput.placeholder = t.bikeNumberPlaceholder;
            elements.bikeNumberError.textContent = t.bikeNumberError;
            elements.submitText.textContent = t.submitText;
            document.getElementById('languageModal').style.display = 'none';
        }

        function showLanguageModal() {
            document.getElementById('languageModal').style.display = 'flex';
        }

        // Initialize language
        const savedLanguage = localStorage.getItem('language') || 'en';
        setLanguage(savedLanguage);

        // Show modal on first load if no language is saved
        if (!localStorage.getItem('language')) {
            showLanguageModal();
        }

        // Form submission
        document.getElementById('parkingForm').addEventListener('submit', function(event) {
            event.preventDefault();

            if (elements.submitBtn.disabled) return;

            // Reset error messages
            elements.nameError.classList.remove('show');
            elements.bikeNumberError.classList.remove('show');

            const name = elements.nameInput.value.trim().toUpperCase();
            const bikeNumber = elements.bikeNumberInput.value.trim().toUpperCase();
            const lang = localStorage.getItem('language') || 'en';
            const t = translations[lang];

            // Validation
            const nameRegex = /^[A-Za-z\s'-]+$/;
            const bikeNumberRegex = /^TN[0-9]{1,2}[A-Z]{0,2}[0-9]{3,4}$/;

            let isValid = true;

            if (!nameRegex.test(name)) {
                elements.nameError.classList.add('show');
                isValid = false;
            }

            if (!bikeNumberRegex.test(bikeNumber)) {
                elements.bikeNumberError.classList.add('show');
                isValid = false;
            }

            if (!isValid) return;

            // Disable button
            elements.submitBtn.disabled = true;
            elements.submitText.textContent = t.sendingText;

            // Construct and encode message with timestamp
            const message = encodeURIComponent(`${name}\n${bikeNumber}`);
            const whatsappUrl = `https://wa.me/919360320051?text=${message}`;

            try {
                window.open(whatsappUrl, '_blank');
                setTimeout(() => {
                    document.getElementById('parkingForm').reset();
                    elements.submitBtn.disabled = false;
                    elements.submitText.textContent = t.submitText;
                    alert(t.successMessage);
                }, 1000);
            } catch (error) {
                console.error('Error opening WhatsApp URL:', error);
                elements.submitBtn.disabled = false;
                elements.submitText.textContent = t.submitText;
                alert(t.errorMessage);
            }
        });
    </script>
</body>
</html>
